{"version":3,"sources":["../node_modules/browserify/node_modules/browser-pack/_prelude.js","server.coffee","../node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js","renderer/actions/route-action.coffee","renderer/components/app-component.coffee","renderer/components/error-component.coffee","renderer/components/index-component.coffee","renderer/components/route-component.coffee","renderer/context.coffee","renderer/keys.coffee","renderer/lib/router-util.coffee","renderer/routes.coffee","renderer/stores/route-store.coffee"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","process","App","AppContext","Handlebars","React","RouterUtil","express","fs","routerUtil","routes","server","template","install","compile","readFileSync","realpathSync","toString","use","root","console","log","get","req","res","argu","context","initialStates","ref","route","originalUrl","RouteStore","send","JSON","stringify","markup","renderToString","createElement","listen","env","PORT","this","./renderer/components/app-component","./renderer/context","./renderer/lib/router-util","./renderer/routes","/Users/pnlybubbles/Devs/flux-server-side-rendering-sample/node_modules/browserify/node_modules/insert-module-globals/node_modules/process/browser.js","undefined","handlebars","react","source-map-support",2,"cleanUpNextTick","draining","currentQueue","queue","concat","queueIndex","drainQueue","timeout","setTimeout","len","run","clearTimeout","Item","fun","array","noop","nextTick","args","Array","arguments","push","prototype","apply","title","browser","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","binding","name","cwd","chdir","dir","umask",3,"Flux","RouteAction","keys","extend","child","parent","ctor","constructor","key","hasProp","__super__","hasOwnProperty","superClass","path","dispatch","Action","../keys","material-flux",4,"AppComponent","Route","props","render","Component","./route-component",5,"ErrorComponent",6,"IndexComponent",7,"RouteComponent","store","routeStore","state","components","Index","_onChange","setState","componentDidMount","onChange","bind","componentWillUnmount","removeAllChangeListeners","./error-component","./index-component",8,"Context","routeAction","./actions/route-action","./stores/route-store",9,10,"clearSlashes","fragment","match","re","replace","RegExp","shift",11,".*",12,"register","Store","../lib/router-util","../routes"],"mappings":"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","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","require('source-map-support').install()\nexpress = require 'express'\nfs = require 'fs'\nHandlebars = require 'handlebars'\nReact = require 'react'\nAppContext = require './renderer/context'\nApp = require './renderer/components/app-component'\nRouterUtil = require './renderer/lib/router-util'\nroutes = require './renderer/routes'\nserver = express()\n\ntemplate = Handlebars.compile fs.readFileSync(\"#{fs.realpathSync('./')}/view/index.hbs\").toString()\n\nserver.use '/static', express.static('public')\n\nrouterUtil = new RouterUtil routes.root, routes.routes\nconsole.log routerUtil\n\nserver.get '*', (req, res) ->\n  console.log req.originalUrl\n  [route, argu] = routerUtil.route req.originalUrl\n  initialStates =\n    RouteStore:\n      route: route\n      argu: argu\n  context = new AppContext(initialStates)\n  res.send template\n    initialStates: JSON.stringify initialStates\n    markup: React.renderToString React.createElement(App, {context})\n\nserver.listen (process.env.PORT || 5000)\n","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            currentQueue[queueIndex].run();\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","Flux = require 'material-flux'\nkeys = require '../keys'\n\nclass RouteAction extends Flux.Action\n  route: (path) ->\n    @dispatch(keys.route, path)\n\nmodule.exports = RouteAction\n","React = require 'react'\nRoute = require './route-component'\n\nclass AppComponent extends React.Component\n  constructor: (props) ->\n    super props\n\n  render: ->\n    React.createElement(\"div\", null,\n      React.createElement(Route, {\"context\": (@props.context)})\n    )\n\nmodule.exports = AppComponent\n","React = require 'react'\n\nclass ErrorComponent extends React.Component\n  constructor: (props) ->\n    super props\n\n  render: ->\n    React.createElement(\"div\", null,\n      React.createElement(\"h1\", null, \"404 NotFound\")\n    )\n\nmodule.exports = ErrorComponent\n","React = require 'react'\n\nclass IndexComponent extends React.Component\n  constructor: (props) ->\n    super props\n\n  render: ->\n    React.createElement(\"div\", null, \"\"\"\n      Hello Index\n\"\"\")\n\nmodule.exports = IndexComponent\n","React = require 'react'\nIndexComponent = require './index-component'\nErrorComponent = require './error-component'\n\nclass RouteComponent extends React.Component\n  constructor: (props) ->\n    super props\n    @store = @props.context.routeStore\n    @state = @store.get()\n    @components =\n      Index: IndexComponent\n      Error: ErrorComponent\n\n  _onChange: ->\n    @setState @store.get()\n\n  componentDidMount: ->\n    @store.onChange @_onChange.bind(@)\n\n  componentWillUnmount: ->\n    @store.removeAllChangeListeners()\n\n  render: ->\n    React.createElement(\"div\", null,\n      (\n        if @components[@state.route]\n          React.createElement @components[@state.route], { argu: @state.argu, context: @props.context }\n      )\n    )\n\nmodule.exports = RouteComponent\n","Flux = require 'material-flux'\nRouteAction = require './actions/route-action'\nRouteStore = require './stores/route-store'\n\nclass Context extends Flux.Context\n  constructor: (initialStates) ->\n    super\n    @initialStates = initialStates\n    @routeAction = new RouteAction(@)\n    @routeStore = new RouteStore(@)\n\nmodule.exports = Context\n","module.exports =\n  route: \"route\"\n","class RouterUtil\n  constructor: (root, routes) ->\n    @root = if root && root != '/' then '/' + @clearSlashes(root) + '/' else '/'\n    @routes = routes\n\n  route: (fragment)->\n    fragment = fragment.replace /\\?(.*)$/, ''\n    fragment = @clearSlashes(fragment.replace(new RegExp(\"^#{@root}\"), ''))\n    for re, r of @routes\n      match = fragment.match new RegExp(\"^#{re}$\")\n      if match\n        match.shift()\n        return [r, match]\n    return [null, []]\n\n  clearSlashes: (path) ->\n    path.toString().replace(/\\/$/, '').replace(/^\\//, '')\n\nmodule.exports = RouterUtil\n","module.exports =\n  root: '/'\n  routes:\n    '' : 'Index'\n    '.*' : 'Error'\n","Flux = require 'material-flux'\nkeys = require '../keys'\nroutes = require '../routes'\nRouterUtil = require '../lib/router-util'\n\nclass RouteStore extends Flux.Store\n  constructor: (context) ->\n    super context\n    @state = context.initialStates.RouteStore\n    @register keys.route, @route\n    @routerUtil = new RouterUtil routes.root, routes.routes\n\n  route: (fragment) ->\n    [route, argu] = @routerUtil.route fragment\n    if route\n      @setState\n        route: route\n        argu: argu\n\n  get: ->\n    @state\n\nmodule.exports = RouteStore\n"],"sourceRoot":"/source/"}